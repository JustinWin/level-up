{% extends 'base.html' %}

{% block content %}
<div id="task-container">
	<button id="show-add-task-container-button">Add Task</button>
	<div id="add-task-container">
		<form method="post">
			<input name="task-name" id="task-name" placeholder="Task Name" required>
			<input type="number" name="task-time" id="task-time" placeholder="00" min="0" max="1440">
			<input type="button" id="add-task-submit-button" value="Add Task">
		</form>
	</div>
	<div id="task-container"></div>
</div>

{% endblock %}

{% block javascript %}
<script>
	async function postData(url, data) {
		console.log("before Post infunc");
		const response = await fetch(url, {
			method: 'POST', // or 'PUT'
			headers: {
				'Content-Type': 'application/json',
			},
			body: JSON.stringify({"foo":1})
		});
		console.log("after Post infunc");
		return response.json(); // parses JSON response into native JavaScript objects
	}

	addEventListener('DOMContentLoaded', (event) => {
		document.getElementById("show-add-task-container-button").addEventListener("click", function() {
			let container = document.getElementById("add-task-container");
			container.style.display = "block";
			let showContainterButton = document.getElementById("show-add-task-container-button");
			showContainterButton.style.display = "none";
		});
	});

	document.getElementById("add-task-submit-button").addEventListener("click", async function() {
		const location = window.location.hostname;
		console.log("before Post");
		postData('/task', {"foo": 1});
		console.log("after Post");
	});
</script>

{% endblock %}