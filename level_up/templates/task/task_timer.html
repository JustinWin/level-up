<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Styling -->
  <link rel="stylesheet" href="../static/task_timer.css">

</head>

<body>
  <div>
    <div class="circle">
      <svg width="300" viewBox="0 0 220 220">
        <g transform="translate(110,110)">
          <circle r="100" class="e-c-base" />
          <g transform="rotate(-90)">
            <circle r="100" class="e-c-progress" />
            <g id="e-pointer">
              <circle cx="100" cy="0" r="8" class="e-c-pointer" />
            </g>
          </g>
        </g>
      </svg>
    </div>
    <div class="controlls">
      <div class="display-remain-time"></div>
      <button class="play" id="pause"></button>
    </div>
  </div>

</body>
<!-- <script>
  //circle start
  let progressBar = document.querySelector('.e-c-progress');
  let indicator = document.getElementById('e-indicator');
  let pointer = document.getElementById('e-pointer');
  let length = Math.PI * 2 * 100;

  console.log(indicator)
  console.log(pointer)
  progressBar.style.strokeDasharray = length;

  function update(value, timePercent) {
    var offset = - length - length * value / (timePercent);
    progressBar.style.strokeDashoffset = offset;
    pointer.style.transform = `rotate(${360 * value / (timePercent)}deg)`;
  };

  //circle ends
  const displayOutput = document.querySelector('.display-remain-time')
  const pauseBtn = document.getElementById('pause');
  const setterBtns = document.querySelectorAll('button[data-setter]');

  let intervalTimer;
  let timeLeft;
  let wholeTime = 10; // manage this to set the whole time in seconds
  let isPaused = false;
  let isStarted = false;


  update(wholeTime, wholeTime); //refreshes progress bar
  displayTimeLeft(wholeTime);

  function changeWholeTime(seconds) {
    if ((wholeTime + seconds) > 0) {
      wholeTime += seconds;
      update(wholeTime, wholeTime);
    }
  }

  function timer(seconds) { //counts time, takes seconds
    let remainTime = Date.now() + (seconds * 1000);
    displayTimeLeft(seconds);

    intervalTimer = setInterval(function () {
      timeLeft = Math.round((remainTime - Date.now()) / 1000);
      if (timeLeft < 0) {
        clearInterval(intervalTimer);
        isStarted = false;
        setterBtns.forEach(function (btn) {
          btn.disabled = false;
          btn.style.opacity = 1;
        });
        displayTimeLeft(wholeTime);
        pauseBtn.classList.remove('pause');
        pauseBtn.classList.add('play');
        return;
      }
      displayTimeLeft(timeLeft);
    }, 1000);
  }
  function pauseTimer(event) {
    if (isStarted === false) {
      timer(wholeTime);
      isStarted = true;
      this.classList.remove('play');
      this.classList.add('pause');

      setterBtns.forEach(function (btn) {
        btn.disabled = true;
        btn.style.opacity = 0.5;
      });

    } else if (isPaused) {
      this.classList.remove('play');
      this.classList.add('pause');
      timer(timeLeft);
      isPaused = isPaused ? false : true
    } else {
      this.classList.remove('pause');
      this.classList.add('play');
      clearInterval(intervalTimer);
      isPaused = isPaused ? false : true;
    }
  }

  function displayTimeLeft(timeLeft) { //displays time on the input
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    let displayString = `${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    displayOutput.textContent = displayString;
    update(timeLeft, wholeTime);
  }

  pauseBtn.addEventListener('click', pauseTimer);
</script> -->

</html>